<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="css/stylehomepage.css">
    <link href="https://fonts.googleapis.com/css?family=Bahiana|Oswald" rel="stylesheet">
    <title>Signup</title>
  </head>
  <script
    src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js">
  </script>
  <script src="https://da189i1jfloii.cloudfront.net/js/kinvey-html5-sdk-3.10.2.min.js"></script>
  <body>
    <div id="signUpForm">
    <button onclick="document.getElementById('signUp').style.display='block'">Sign Up</button>
     <div class="modal">
       <span onclick="document.getElementById('signUp').style.display='none'" class="close" title="Close Modal">X</span>
       <form class="modal-content" action="/action_page.php">
         <div class="container">
          <div class="panel">
           <h2>Sign up</h2>
           <div class="form-group">
             <label for="email">Email Address</label>
             <input type="text" placeholder="email" id="email">
           </div>
           <div class="form-group">
             <label for="password">Password</label>
             <input type="password" placeholder="password" id="password">
           </div>
           <div class="form-group">
             <label for="password">Repeat password</label>
             <input type="password" placeholder="password" id="password2">
           </div>
           <div class="form-group">
             <p id="signupError" class="error-msg"></p>
           </div>
           <div class="form-group">
             <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancel</button>
             <button type="submit" id="signUp" class="signupbtn">Sign Up</button>
             </div>
           <div class="form-group">
              <p> Already have an account? Login <a href="login.html">here</a>.</p>
           </div>
         </div>
       </form>
      </div>
</div>
        <script>
             var start = Kinvey.initialize({
               appKey: 'kid_SykK63Erf',
               appSecret: '8a4725500ebf4e00a4e8877f76f78ae9'
             })

             start.then(function onSuccess(activeUser){
             if(activeUser != null) window.location = 'index.html';
           }).catch(function onError(error){
             console.log('Error', error);
           })

             $('#submitSignup').click(signUp);

             function signUp(){
               if($('#password').val() == $('#password2').val()){

                 var sign = Kinvey.User.signup({
                     username: $('#email').val(),
                     password: $('#password').val(),
                     email: $('#email').val()
                   })

                     sign.then(function onSuccess(activeUser){
                     window.location = 'index.html';
                   }).catch(function onError(error){
                     $('#signupError').html(error.message)
                   })
               } else {
                 $('#signupError').html('Your passwords do not match');
               }
             }
             </script>


  </body>
</html>
